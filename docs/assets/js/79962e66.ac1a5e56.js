"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[50],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>y});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),m=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=m(e.components);return i.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=m(n),u=a,y=p["".concat(s,".").concat(u)]||p[u]||d[u]||o;return n?i.createElement(y,r(r({ref:t},c),{},{components:n})):i.createElement(y,r({ref:t},c))}));function y(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:a,r[1]=l;for(var m=2;m<o;m++)r[m]=n[m];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},9895:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>m});var i=n(7462),a=(n(7294),n(3905));const o={sidebar_position:4},r="Elementy \u015bwiata",l={unversionedId:"Rozwini\u0119cie/Elementy-swiata",id:"Rozwini\u0119cie/Elementy-swiata",title:"Elementy \u015bwiata",description:"\u015bwiat",source:"@site/docs/2-Rozwini\u0119cie/4-Elementy-swiata.md",sourceDirName:"2-Rozwini\u0119cie",slug:"/Rozwini\u0119cie/Elementy-swiata",permalink:"/StatkiTSDocs/docs/Rozwini\u0119cie/Elementy-swiata",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/2-Rozwini\u0119cie/4-Elementy-swiata.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Symulator czasu rzeczywistego",permalink:"/StatkiTSDocs/docs/Rozwini\u0119cie/Symulator-Czasu-rzeczysistego"},next:{title:"Podsumowanie",permalink:"/StatkiTSDocs/docs/3 Zako\u0144czenie/Podsumowanie"}},s={},m=[{value:"\u015bwiat",id:"\u015bwiat",level:2},{value:"Wybrane Elementy \u015bwiata",id:"wybrane-elementy-\u015bwiata",level:3},{value:"Position",id:"position",level:4},{value:"DynamicElement",id:"dynamicelement",level:4},{value:"Stabilno\u015b\u0107 modelu dynamiki",id:"stabilno\u015b\u0107-modelu-dynamiki",level:5},{value:"ViewPoint",id:"viewpoint",level:4}],c={toc:m},p="wrapper";function d(e){let{components:t,...o}=e;return(0,a.kt)(p,(0,i.Z)({},c,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"elementy-\u015bwiata"},"Elementy \u015bwiata"),(0,a.kt)("h2",{id:"\u015bwiat"},"\u015bwiat"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Elementy \u015bwiata")," posiadaj\u0105 referencje do innych element\xf3w \u015bwiata. Tworz\u0105 w ten spos\xf3b struktur\u0119 danych (\u015bwiat).\nTak wygl\u0105da diagram klas Element\xf3w \u015bwiata:\n",(0,a.kt)("img",{src:n(9557).Z,width:"2308",height:"744"})),(0,a.kt)("h3",{id:"wybrane-elementy-\u015bwiata"},"Wybrane Elementy \u015bwiata"),(0,a.kt)("h4",{id:"position"},"Position"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"export class Position {\n    value: Vector2 = new Vector2(0, 0);\n    constructor(value: Vector2 = new Vector2(0, 0)) {\n    this.value = value;\n    }\n}\n")),(0,a.kt)("p",null,"Pozycja jest tylko dan\u0105, nie posiada metod."),(0,a.kt)("h4",{id:"dynamicelement"},"DynamicElement"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"export class DynamicElement {\n    force = new Vector2(0, 0);\n    mass = 1;\n    acceleration = new Vector2(0, 0);\n    velocity = new Vector2(0, 0);\n    position: Position\n\n    viewPoint: ViewPoint // na potrzeby test\xf3w\n\n    constructor(position: Position, mass: number = 1) {\n        this.mass = mass;\n        this.position = position;\n\n        this.viewPoint = new ViewPoint(position);\n\n        dynamicElements.addElement(this);\n    }\n\n    update(dt: number) {\n        this.acceleration = this.force.clone().divideScalar(this.mass);\n        this.velocity.add(this.acceleration.clone().multiplyScalar(dt));\n        this.position.value.add(this.velocity.clone().multiplyScalar(dt));\n\n        this.force = new Vector2(0, 0);\n    }\n\n    remove() {\n        dynamicElements.removeElement(this);\n    }\n\n    getMomentum() {\n        return this.velocity.clone().multiplyScalar(this.mass);\n    }\n}\n")),(0,a.kt)("p",null,"Jest to jeden z wa\u017cniejszych element\xf3w \u015bwiata. Przechowuje on informacje o pr\u0119dko\u015bci, przyspieszeniu, masie, p\u0119dzie i sile, kt\xf3ra dzia\u0142a na element. metoda ",(0,a.kt)("inlineCode",{parentName:"p"},"update")," dokonuje ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Numerical_integration#Reasons_for_numerical_integration"},"integracji numerycznej")," ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Equations_of_motion"},"r\xf3wna\u0144 ruchu")," W ten spos\xf3b oblicza nowe warto\u015bci swoich atrybut\xf3w. Ten Obiekt nie implementuje ",(0,a.kt)("inlineCode",{parentName:"p"},"WorldElements")," poniewa\u017c korzysta ze zmodyfikowanej metody ",(0,a.kt)("inlineCode",{parentName:"p"},"update")," kt\xf3ra przyjmuje argument ",(0,a.kt)("inlineCode",{parentName:"p"},"dt")," (delta time) czyli zmiana jaka b\u0119dzie u\u017cyta w integracji.\nNale\u017cy uwa\u017ca\u0107 na prawid\u0142ow\u0105 warto\u015b\u0107 ",(0,a.kt)("inlineCode",{parentName:"p"},"dt"),". Zbyt ma\u0142a mo\u017ce spowodowa\u0107 problemy z wydajno\u015bci\u0105, a zbyt du\u017ca mo\u017ce spowodowa\u0107 destabilizacje modelu dynamicznego tzn. model przestanie zachowywa\u0107 sta\u0142e ruchu takie jak: zachowanie p\u0119du, czy energii w skutek czego model si\u0119 'rozpadnie'."),(0,a.kt)("h5",{id:"stabilno\u015b\u0107-modelu-dynamiki"},"Stabilno\u015b\u0107 modelu dynamiki"),(0,a.kt)("p",null,"Model jest stabilny, je\u017celi zachowuje p\u0119d"),(0,a.kt)("p",null,"P\u0119d jest sta\u0142y, je\u017celi ",(0,a.kt)("inlineCode",{parentName:"p"},"dt")," jest dostatecznie ma\u0142e. Istnieje takie ",(0,a.kt)("inlineCode",{parentName:"p"},"dtMax")," poni\u017cej, kt\xf3rego system jest stabilny.  Jak podaje Wikipedia ",(0,a.kt)("inlineCode",{parentName:"p"},"dtMax")," jest zwi\u0105zane z najwi\u0119ksz\u0105 cz\u0119sto\u015bci\u0105 drgania kt\xf3regokolwiek moleku\u0142a systemu. ",(0,a.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Energy_drift"},"Energy Drift")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"dtMax = 2^(1/2)/omega\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://wikimedia.org/api/rest_v1/media/math/render/svg/2ce85b09695b0dbc73db5971451e712ed4f9f114",alt:"{\\displaystyle \\Delta t<{\\frac {\\sqrt {2}}{\\omega }}\\approx 0.225p}"})),(0,a.kt)("p",null,"Omega jest sta\u0142a, je\u017celi oddzia\u0142ywania si\u0119 nie zmieniaj\u0105, to znaczy nie powstaj\u0105 i nie znikaj\u0105 nowe obiekty klasy ",(0,a.kt)("inlineCode",{parentName:"p"},"Interaction"),". Omega jest r\xf3wna "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"omega = (k/m)^(1/2)\n")),(0,a.kt)("p",null,"gdzie:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"k")," - wsp\xf3\u0142czynnik spr\u0119\u017cysto\u015bci"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"m")," - masa")),(0,a.kt)("p",null,"Dla cz\u0105stek, kt\xf3re podlegaj\u0105 wielu oddzia\u0142ywaniom, zsumuj\u0119 wsp\xf3\u0142czynnik spr\u0119\u017cysto\u015bci, tak jak by spr\u0119\u017cyny by\u0142y po\u0142\u0105czone r\xf3wnolegle."),(0,a.kt)("p",null,"Teraz znajduj\u0119 najwi\u0119ksz\u0105 omeg\u0119 i na jej podstawie wyznaczam ",(0,a.kt)("inlineCode",{parentName:"p"},"dtMax")," poni\u017cej kt\xf3rej system jest stabilny.\nCiekawe \ud83e\udd14, \u017ce to dzia\u0142a:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"test('momentum conservation for for wsp = 2^(1/2)', () => {\n        // molecular model is stable (conservation of momentum) if dt< wsp /omegaMax\n        // where omegaMax is the highest oscilation frequency of the molecul in the system \n        // according to Wikipedia wsp should be 2^(1/2)\n        dynamicElement1.velocity = new Vector2(10, 0);\n        dynamicElement2.mass = 10000000;\n        \n        for (let i = 1; i < 1000; i++) {\n            interaction.springRate = Math.random() * 1000;\n            dynamicElement1.mass = Math.random() * 1000;\n            dynamicElement2.mass = Math.random() * 1000;\n            dynamicElement1.velocity = new Vector2(10, Math.random() * 1000);\n            let maximumDt = calculatemaximumDt(interaction.springRate, dynamicElement1.mass, dynamicElement2.mass);\n            maximumDt *= 1;\n            let momentum0 = dynamicElement1.getMomentum().add(dynamicElement2.getMomentum());\n            for (let i = 0; i < 10000; i++) {\n                interaction.update();\n                dynamicElementUpdater.update(maximumDt);\n            }\n            let momentum1 = dynamicElement1.getMomentum().add(dynamicElement2.getMomentum());\n            expect(momentum0.distanceTo(momentum1) <= 0.01 * momentum0.length()).toBeTruthy();\n        }\n    });\n")),(0,a.kt)("p",null,"Je\u017celi ",(0,a.kt)("inlineCode",{parentName:"p"},"maximumDt")," pomno\u017c\u0119, chocia\u017c przez ",(0,a.kt)("inlineCode",{parentName:"p"},"1.1")," to system przestaje by\u0107 stabilny. \ud83d\udc4f"),(0,a.kt)("h4",{id:"viewpoint"},"ViewPoint"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"export class ViewPoint implements View {\n    readonly position: Position;\n    readonly circle: THREE.Mesh;\n\n    constructor(position: Position) {\n        this.position = position;\n\n        const geometry = new THREE.CircleGeometry(5, 32);\n        const material = new THREE.MeshBasicMaterial({ color: 0xffff00 });\n        this.circle = new THREE.Mesh(geometry, material);\n        views.addView(this)\n    }\n\n\n    get3DObject(): THREE.Object3D<THREE.Event> {\n        return this.circle;\n    }\n    update(): void {\n        this.circle.position.set(this.position.value.x, this.position.value.y, 0);\n    }\n    destroy(): void {\n        views.removeView(this);\n    }\n}\n")))}d.isMDXComponent=!0},9557:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/diagram-klas-37f28b6ac13b0336e1f3dc971d1e3963.png"}}]);